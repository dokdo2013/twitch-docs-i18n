# 인증

트위치 API는 자원에 접근하기 위해 OAuth 2.0 액세스 토큰을 이용합니다. OAuth 2.0 사양에 대해 친숙하지 않다면, 그 명세를 읽는 것이 트위치 API와 함께 사용되는 액세스 토큰 획득 방법 이해에 도움이 될 것입니다.

트위치 API는 유저 액세스 토큰과 앱 액세스 토큰의 두 가지 종류의 액세스 토큰을 이용합니다. 각 API의 레퍼런스 문서는 해당 리소스에 접근하기 위해 어떤 종류의 액세스 토큰을 이용해야하는지 명시합니다. API별로 유저 액세스 토큰을 필요로 하거나, 혹은 둘 중 하나만 필요로 하는 API도 있고, EventSub API와 같이 앱 액세스 토큰을 필요로 하는 API도 있습니다.

**중요** 액세스 토큰, 리프레시 토큰, 클라이언트 시크릿을 비밀번호처럼 취급하고 보호하세요.

## 유저 액세스 토큰

자원에 접근하기 위해 유저의 권한을 필요로 하는 API는 유저 액세스 토큰을 사용합니다. 트위치는 자원을 정의할 때 스코프(Scope)를 사용합니다. 스코프는 앱이 접근할 수 있는 자원 혹은 자원 내의 필드를 정의합니다. 예를 들어, 유저의 기본 정보를 조회하기 위해서는 권한이 따로 필요하지 않지만, 이메일 주소를 포함한 자원을 얻기 위해서는 권한이 필요합니다.

다음 사진은 트위치가 유저로부터 투표를 생성/중지하거나 투표 목록을 얻기 위한 권한을 얻기 위해 보여주는 예시 화면입니다. 만일 유저가 **Authorize** 버튼을 누르면, 트위치는 해당 기능을 동작시킬 수 있는 액세스 토큰을 발급합니다.

![https://dev.twitch.tv/docs/assets/uploads/authorization-dialog.png](https://dev.twitch.tv/docs/assets/uploads/authorization-dialog.png)

만들고 있는 앱의 종류에 따라, 유저 액세스 토큰을 얻기 위해 다음 OAuth 흐름 중 하나를 사용합니다.

| 흐름 | 설명 |
| :--- | :--- |
| 암시적 승인 흐름 | 서버를 사용하지 않는다면 이 흐름을 이용하세요. 가령 클라이언트 사이드 자바스크립트 앱이나, 모바일 앱이라면 이 흐름이 적합합니다. 이 흐름을 이용해 유저 액세스 토큰을 얻는 방법에 대해 더 자세히 알고 싶다면, 암시적 승인 흐름을 이용해 유저 액세스 토큰을 얻기 문서를 참고하세요. |
| 인가 코드 승인 흐름 | 클라이언트 암호를 안전하게 저장할 수 있고, (브라우저를 통하지 않고) 서버에서 서버로 트위치 API 요청을 보낼 수 있는 서버를 사용한다면 이 흐름을 이용하세요. 이 흐름을 이용해 유저 액세스 토큰을 얻는 방법에 대해 더 자세히 알고 싶다면, 인가 코드 승인 흐름을 이용해 유저 액세스 토큰을 얻기 문서를 참고하세요. |

## 앱 액세스 토큰

유저의 권한을 필요로 하지 않는 API의 경우 앱 액세스 토큰을 사용합니다. 예를 들어, 유저로부터 권한을 획득하지 않더라도 동영상 목록을 얻을 수 있습니다.

만일 유저의 권한을 필요로 하지 않는 API만 호출하는 앱이면, 반드시 앱 액세스 토큰을 얻어야 합니다. 그러나 만일 유저 액세스 토큰을 필요로 하는 API도 호출할 것이라면, 유저 액세스 토큰을 얻는 것이 좋습니다. 왜냐하면 대부분의 경우 유저 액세스 토큰을 이용해 앱 액세스 토큰을 사용하는 API를 호출할 수 있기 때문입니다. 예외는 EventSub API를 호출하는 경우입니다. 만일 EventSub API를 호출하고 웹훅을 사용한다면, 반드시 앱 액세스 토큰을 얻어야 합니다. 왜냐하면 유저 액세스 토큰을 사용하면 호출이 실패하기 때문입니다.

앱 액세스 토큰을 얻기 위해서는, 클라이언트 자격 증명 인가 흐름을 사용하세요. 자세한 내용은 클라이언트 자격 증명 인가 흐름을 이용해 앱 액세스 토큰을 얻기 문서를 참고하세요.

## 인증 흐름

다음 표는 각 액세스 토큰을 획득하기 위해 사용할 수 있는 흐름을 요약한 것입니다.

| 흐름 | 유저 액세스 토큰 | ID 토큰 | 앱 액세스 토큰 |
| :--- | :--- | :--- | :--- |
| OIDC 암시적 코드 흐름 | ✔	| ✔ | |
| OAuth 암시적 코드 흐름 | ✔	| | |
| OIDC 인가 코드 흐름 | ✔	| ✔ | |
| OAuth 인가 코드 흐름 |	✔ | | |
| OAuth 클라이언트 자격 증명 흐름 |	|	|	✔ |

**NOTE** An ID token or identity token encodes the user’s identity in a JSON Web Token (JWT). It’s used in OpenID Connect client apps to sign in users. You cannot use the ID token in place of a user or app access token when calling the Twitch API. Read more about ID tokens.

## Passing the access token to the API

After getting an access token using one of the above authentication flows, use it to set an API request’s Authorization header.

`Authorization: Bearer <access token goes here>`

For an API request that shows using the header, see Get channel information.

## Tokens don’t last forever

Access and refresh tokens can become invalid for the following reasons:

- The token expires.
- The user changes their password.
- Twitch revokes the token.
- The user disconnects your app by going to their account’s /settings/connections page and clicking Disconnect next to your app’s name.

If a token becomes invalid, your API requests return HTTP status code 401 Unauthorized. When this happens, you’ll need to get a new access token using the appropriate flow for your app.

## Validating tokens for 3rd-party apps

Third-party apps that call the Twitch APIs and maintain an OAuth session **must** call the `/validate` endpoint to verify that the access token is still valid. Read more

## Next steps

Before you can get an access token you need to register your app. For details, see Registering your app.

Check out these code samples that show how to get access tokens:

- Go
- Node.js
