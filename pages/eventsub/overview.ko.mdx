# EventSub

EventSub 구독은 트위치에서 발생하는 이벤트를 애플리케이션이 수신할 수 있게 해줍니다. 구독한 이벤트 중 하나가 발생하면, 트위치는 알림을 보내줍니다. 예를 들어, 다음과 같은 경우에 알림을 받을 수 있습니다.

- 방송이 시작될 때
- 새 팔로워가 생길 때
- 새 구독자가 생길 때
- 유저가 채널에서 비트를 기부할 때
- 유저가 채널 포인트를 사용할 때

트위치는 아래 수단으로 알림을 발송합니다:

- 웹훅
- 웹소켓

이벤트를 구독하기 전에, 먼저 이벤트를 수신하기 위한 웹훅 콜백 주소나 웹소켓 클라이언트를 만들어야 합니다. 웹훅 콜백에 대해 더 알고싶다면 [웹훅으로 이벤트 수신하기](/eventsub/webhook)를, 웹소켓 클라이언트에 대해 더 알고싶다면 [웹소켓으로 이벤트 수신하기](/eventsub/websocket)를 참고하세요.

웹훅 콜백 주소나 웹소켓 클라이언트를 만든 후, 이벤트를 구독할 수 있습니다. 이벤트를 구독하는 방법에 대해 알고싶다면 [구독 관리하기](/eventsub/manage-subscriptions)를 참고하세요.

**참고**: EventSub 구독은 전송 방식에 독립적입니다. 대부분의 경우, 트위치가 지원하는 모든 전송 방식에서 모든 구독을 사용할 수 있습니다. 전송 방식이 구독 유형을 지원할 수 없는 경우, 문서에서 제한 사항을 확인할 수 있습니다. 새로운 구독 유형이 EventSub에 추가되면, 가능한 경우 트위치는 모든 전송 방식에서 동시에 지원합니다.

## 중복 이벤트 처리하기

트위치는 이벤트 알림을 최소 1회 전송합니다. 하지만 트위치가 알림을 받았는지 확실하지 않은 경우, 알림을 다시 전송합니다. 다시 말해 특정 상황에서는 알림을 두 번 받을 수 있습니다. 트위치가 알림을 다시 전송하는 경우, 메시지 ID는 동일합니다.

만일 같은 메시지를 2회 이상 받는 것이 문제가 된다면, 이미 처리한 메시지를 추적해야 합니다. `message_id` 필드는 메시지의 ID를 포함합니다. 만일 이미 메시지를 처리했다면, 메시지를 다시 처리하지 않아야 합니다.

## 재전송 공격 방어하기

재전송 공격을 방어하려면, 다음 내용을 참고해주세요:

- 응답값 중 message_timestamp 필드의 값이 10분 이내인지 확인하세요.
- message_id 필드의 ID값을 이미 처리했는지 확인하세요.
