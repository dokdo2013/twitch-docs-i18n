# 레이드

레이드는 스트리머가 시청자들이 다른 스트리머의 방송을 볼 수 있도록 보내는 트위치 기능입니다. 레이드는 시청자 공유하며 다른 스트리머와 연결하고 네트워크를 형성할 수 있게 합니다. 이를 통해 당신의 커뮤니티를 성장시켜 보세요.

## 다른 스트리머에게 레이드 보내기

다른 스트리머에게 레이드를 보내려면, 챗봇이나 익스텐션이 [레이드 시작하기](/twitch-api/reference/start-a-raid) 엔드포인트로 POST 요청을 보내면 됩니다. 요청 시 `broadcaster_id` 쿼리 파라미터는 레이드 파티를 보내는 스트리머이며, `to_broadcaster_id` 쿼리 파라미터는 레이드를 받는 스트리머를 입력해주세요.

```bash
curl -X POST 'https://api.twitch.tv/helix/raids?from_broadcaster_id=12345678&to_broadcaster_id=87654321' \
-H 'Authorization: Bearer kpvy3cjboyptmdkiacwr0c19hotn5s' \
-H 'Client-Id: hof5gwx0su6owfnys0nyan9c87zr6t'
```

요청 자체는 레이드를 바로 시작시키지 않습니다. 다만 레이드를 하는 스트리머의 채팅방에 몇 명의 시청자를 레이드할 지 보여주는 팝업 창이 뜹니다. 레이드는 스트리머가 **지금 레이드** 버튼을 눌렀을 때, 또는 레이드 카운트다운이 시작된 지 90초 이후에 실행됩니다.

아래는 이전 요청에 대한 응답 형식입니다:

```json
{
  "data": [
    {
      "created_at": "2022-02-18T07:20:50.52Z",
      "is_mature": false
    }
  ]
}
```

응답에 있는 `is_mature` 필드를 사용하면 지정된 채널이 성인 콘텐츠를 포함하고 있는지 시청자들에게 알려줄 수 있습니다. 트위치 UX는 지정된 채널이 구독자 또는 팔로워 전용 채널인지를 알 수 있게 합니다. 만일 UX에 같은 정보를 제공하고 싶다면, [채팅 설정 조회하기](/twitch-api/reference/get-channel-settings) 엔드포인트를 이용해 `subscriber_mode`와 `follower_mode` 필드를 확인해주세요.

## 레이드가 시작되었을 때 알림 받기

[레이드 시작하기](/twitch-api/reference/start-a-raid) 응답은 단순히 해당 요청이 예약되었다는 사실만 알려줍니다. 만일 레이드가 실질적으로 실행된 시점을 알고 싶다면, 채널 레이드 이벤트를 구독해야 합니다. 더 자세한 정보를 알고 싶다면 EventSub 메뉴를 확인해주세요.

만일 해당 레이드 이벤트가 본인을 위한 것인지 알기 위해서는, 이벤트에 있는 `from_broadcaster_id`와 `to_broadcaster_id` 값의 from와 to ID 값을 비교하세요.

## 레이드 취소하기

레이드를 취소하기 위해서는, 레이드 취소 엔드포인트에 DELETE 요청을 보내세요. 스트리머가 트위치 UX에서 지금 레이드 버튼을 클릭하기 전이나 90초 카운트다운이 끝나기 전이라면 레이드를 취소할 수 있습니다.

다음 예시는 레이드를 취소하는 요청을 보여줍니다. broadcaster_id 쿼리 파라미터를 레이드 대상 스트리머 ID로 설정해주세요.

```bash
curl -X DELETE 'https://api.twitch.tv/helix/raids?broadcaster_id=12345678' \
-H 'Authorization: Bearer kpvy3cjboyptmdkiacwr0c19hotn5s' \
-H 'Client-Id: hof5gwx0su6owfnys0nyan9c87zr6t'
```

만일 레이드가 아직 시작되지 않았고 레이드 취소가 성공적으로 수행되었다면, HTTP 응답 코드는 `204 No Content`를 반환할 것입니다. 반면 레이드가 이미 시작되었을 경우에는, `404 Not Found` 응답 코드를 반환합니다.

이 엔드포인트는 트위치 UX 상에서 취소 버튼을 누르거나, 레이드 팝업 창을 무시하는 상황에서 효과적으로 동작합니다.
